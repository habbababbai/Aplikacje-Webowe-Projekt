!function(e){var t={};function l(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=t,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(i,o,function(t){return e[t]}.bind(null,o));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=5)}([function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colors={ship:"Black",empty:"White",hit:"Red",miss:"Pink",hover:"Grey"}},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Empty=0]="Empty",e[e.Ship=1]="Ship",e[e.Hit=2]="Hit",e[e.Miss=3]="Miss"}(t.CellState||(t.CellState={}))},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_LENGTH=49,t.DIMENSION_LENGTH=7,t.MAX_HITS=14,t.FIRST_ROW_LAST_INDEX=t.DIMENSION_LENGTH-1,t.LAST_ROW_FIRST_INDEX=t.TABLE_LENGTH-t.DIMENSION_LENGTH},function(e,t,l){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)Object.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=l(0),a=l(9),n=l(1),r=l(4),s=i(l(2));t.Board=class{constructor(e){this.cellTable=[],this.cellTable=[];for(let t=0;t<e.length;t++)this.cellTable.push(new a.Cell(e[t]))}placeHorizontal(e,t){for(let l=e;l<e+t;l++)this.cellTable[l].state=n.CellState.Ship}placeVertical(e,t){for(let l=e;l<e+t*s.DIMENSION_LENGTH;l+=s.DIMENSION_LENGTH)this.cellTable[l].state=n.CellState.Ship}canPlaceHorizontal(e,t){if(e%s.DIMENSION_LENGTH+t>s.DIMENSION_LENGTH)return!1;if(e+t>this.cellTable.length)return!1;for(let l=e;l<e+t;l++)if(this.cellTable[l].state!=n.CellState.Empty)return!1;return!0}canPlaceVertical(e,t){if(Math.floor(e/s.DIMENSION_LENGTH)+t>s.DIMENSION_LENGTH)return!1;for(let l=e;l<e+t*s.DIMENSION_LENGTH;l+=s.DIMENSION_LENGTH)if(this.cellTable[l].state!=n.CellState.Empty)return!1;return!0}setBoardRandomly(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2)}placeRandomly(e){let t;do{let l=r.getRandomInt(0,this.cellTable.length-1);this.canPlaceHorizontal(l,e)&&(this.placeHorizontal(l,e),t=!0),this.canPlaceVertical(l,e)&&(this.placeVertical(l,e),t=!0)}while(!t)}resetBoard(){for(let e=0;e<this.cellTable.length;e++)this.cellTable[e].button.style.backgroundColor=o.colors.empty,this.cellTable[e].state=n.CellState.Empty,this.cellTable[e].button.onclick=function(){}}disableBoard(){for(let e=0;e<this.cellTable.length;e++)this.cellTable[e].button.onclick=function(){},this.cellTable[e].button.onmouseover=function(){},this.cellTable[e].button.onmouseout=function(){}}setCell(e,t){switch(this.cellTable[e].state=t,t){case n.CellState.Empty:this.cellTable[e].button.style.backgroundColor=o.colors.empty;break;case n.CellState.Ship:this.cellTable[e].button.style.backgroundColor=o.colors.ship;break;case n.CellState.Miss:this.cellTable[e].button.style.backgroundColor=o.colors.miss;break;case n.CellState.Hit:this.cellTable[e].button.style.backgroundColor=o.colors.hit}}}},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},function(e,t,l){l(6),e.exports=l(10)},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=l(7);window.onload=()=>{let e=Array.prototype.slice.call(document.getElementById("playerTable").querySelectorAll("button")),t=Array.prototype.slice.call(document.getElementById("enemyTable").querySelectorAll("button")),l=new i.Game(e,t),o=document.getElementById("ship5"),a=document.getElementById("ship4"),n=document.getElementById("ship3"),r=document.getElementById("ship2"),s=document.getElementById("orientation"),c=document.getElementById("reset"),u=document.getElementById("startGame"),h=document.getElementById("random"),d=[o,a,n,r,s,h,u];function p(e){l.pBoard.chooseShip(e)}function f(e){e.disabled=!0}o.addEventListener("click",()=>{p(5),f(o),f(h)}),a.addEventListener("click",()=>{p(4),f(a),f(h)}),n.addEventListener("click",()=>{p(3),f(n),f(h)}),r.addEventListener("click",()=>{p(2),f(r),f(h)}),s.addEventListener("click",(function(){l.changePlacingOrientation()})),c.addEventListener("click",(function(){l.resetGame();for(let e=0;e<d.length;e++)d[e].disabled=!1})),u.addEventListener("click",()=>function(){if(l.startGame(),l.pBoard.areShipsPlaced())for(let e=0;e<d.length;e++)d[e].disabled=!0;else alert("You need to place all ships!")}()),h.addEventListener("click",()=>function(){l.pBoard.setBoardRandomly();for(let e=0;e<4;e++)d[e].disabled=!0}())}},function(e,t,l){"use strict";var i=this&&this.__awaiter||function(e,t,l,i){return new(l||(l=Promise))((function(o,a){function n(e){try{s(i.next(e))}catch(e){a(e)}}function r(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(n,r)}s((i=i.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)Object.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const a=l(0),n=l(1),r=l(8),s=l(3),c=l(4),u=o(l(2));t.Game=class{constructor(e,t){this.pBoard=new r.PlayerBoard(e),this.eBoard=new s.Board(t),this.pHitCounter=0,this.eHitCounter=0}changePlacingOrientation(){this.pBoard.placingHorizontal=!this.pBoard.placingHorizontal}startGame(){this.pBoard.areShipsPlaced()&&this.activateEnemyBoard()}activateEnemyBoard(){this.eBoard.setBoardRandomly();for(let e=0;e<this.eBoard.cellTable.length;e++)this.eBoard.cellTable[e].button.onclick=()=>this.shootEnemyCell(this.eBoard.cellTable[e]),console.log(this.pBoard.getNeighbours(e))}shootPlayerCell(){let e=this.pBoard.getHitNeighbours();Array.isArray(e)&&e.length?this.searchingShot():this.randomShot()}randomShot(){let e=this.pBoard.getEmptyCells(),t=c.getRandomInt(0,e.length-1);this.playerCellState(e[t])==n.CellState.Empty&&this.pBoard.setCell(e[t],n.CellState.Miss),this.playerCellState(e[t])==n.CellState.Ship&&(this.pBoard.setCell(e[t],n.CellState.Hit),this.pHitCounter++)}searchingShot(){let e=this.pBoard.getHitNeighbours(),t=c.getRandomInt(0,e.length-1);this.playerCellState(e[t])==n.CellState.Empty&&this.pBoard.setCell(e[t],n.CellState.Miss),this.playerCellState(e[t])==n.CellState.Ship&&(this.pBoard.setCell(e[t],n.CellState.Hit),this.pHitCounter++)}delay(e){return new Promise(t=>setTimeout(t,e))}shootEnemyCell(e){return i(this,void 0,void 0,(function*(){switch(e.state){case n.CellState.Empty:e.state=n.CellState.Miss,e.button.style.backgroundColor=a.colors.miss;break;case n.CellState.Ship:e.state=n.CellState.Hit,e.button.style.backgroundColor=a.colors.hit,this.eHitCounter++}yield this.delay(100),this.shootPlayerCell(),yield this.delay(200),this.checkForWin()}))}playerCellState(e){return this.pBoard.cellTable[e].state}checkForWin(){return this.pHitCounter==u.MAX_HITS?(this.eBoard.disableBoard(),alert("CPU Won!"),!0):this.eHitCounter==u.MAX_HITS&&(this.eBoard.disableBoard(),alert("Player won!"),!0)}resetGame(){this.pBoard.resetBoard(),this.pBoard.disableBoard(),this.eBoard.resetBoard(),this.eBoard.disableBoard(),this.eHitCounter=0,this.pHitCounter=0,this.pBoard.is5Placed=!1,this.pBoard.is4Placed=!1,this.pBoard.is3Placed=!1,this.pBoard.is2Placed=!1}}},function(e,t,l){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)Object.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=l(0),a=l(3),n=l(1),r=i(l(2));class s extends a.Board{constructor(e){super(e),this.placingHorizontal=!0,this.is5Placed=!1,this.is4Placed=!1,this.is3Placed=!1,this.is2Placed=!1,this.shipsPlaced=[this.is2Placed,this.is3Placed,this.is4Placed,this.is5Placed]}getEmptyCells(){let e=[];for(let t=0;t<this.cellTable.length;t++)t%2==0&&(this.cellTable[t].state!=n.CellState.Empty&&this.cellTable[t].state!=n.CellState.Ship||e.push(t));return e}getHitCells(){let e=[];for(let t=0;t<this.cellTable.length;t++)this.cellTable[t].state==n.CellState.Hit&&e.push(t);return e}getHitNeighbours(){let e=this.getHitCells(),t=[];for(let l=0;l<e.length;l++)t=t.concat(this.getNeighbours(e[l]));return t=t.filter(e=>this.cellTable[e].state!=n.CellState.Miss&&this.cellTable[e].state!=n.CellState.Hit),t}getNeighbours(e){let t=[];return e>r.FIRST_ROW_LAST_INDEX&&t.push(e-r.DIMENSION_LENGTH),e<r.LAST_ROW_FIRST_INDEX&&t.push(e+r.DIMENSION_LENGTH),e%r.DIMENSION_LENGTH!=0&&t.push(e-1),(e-r.FIRST_ROW_LAST_INDEX)%r.DIMENSION_LENGTH!=0&&t.push(e+1),t}setShip(e,t){let l=!1;if(this.placingHorizontal?this.canPlaceHorizontal(e,t)&&(this.placeHorizontal(e,t),l=!0):this.canPlaceVertical(e,t)&&(this.placeVertical(e,t),l=!0),l){switch(t){case 2:this.is2Placed=!0;break;case 3:this.is3Placed=!0;break;case 4:this.is4Placed=!0;break;case 5:this.is5Placed=!0}this.resetButtonEvents()}}setBoardRandomly(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2),this.is5Placed=!0,this.is4Placed=!0,this.is3Placed=!0,this.is2Placed=!0}areShipsPlaced(){return!!(this.is5Placed&&this.is4Placed&&this.is3Placed&&this.is2Placed)}anyShipPlaced(){return!!(this.is5Placed||this.is4Placed||this.is3Placed||this.is2Placed)}resetButtonEvents(){for(let e=0;e<this.cellTable.length;e++)this.cellTable[e].button.onclick=function(){},this.cellTable[e].button.onmouseover=function(){},this.cellTable[e].button.onmouseout=function(){}}placeHorizontal(e,t){for(let l=e;l<e+t;l++)this.cellTable[l].button.style.backgroundColor=o.colors.ship,this.cellTable[l].state=n.CellState.Ship}placeVertical(e,t){for(let l=e;l<e+t*r.DIMENSION_LENGTH;l+=r.DIMENSION_LENGTH)this.cellTable[l].button.style.backgroundColor=o.colors.ship,this.cellTable[l].state=n.CellState.Ship}chooseShip(e){if(!this.shipsPlaced[e-2])for(let t=0;t<this.cellTable.length;t++)this.cellTable[t].button.onclick=()=>{this.setShip(t,e)},this.cellTable[t].button.onmouseover=()=>{this.hover(t,e,o.colors.hover)},this.cellTable[t].button.onmouseout=()=>{this.hover(t,e,o.colors.empty)}}hover(e,t,l){if(this.placingHorizontal){if(this.canPlaceHorizontal(e,t))for(let i=e;i<e+t;i++)this.cellTable[i].button.style.backgroundColor=l}else if(this.canPlaceVertical(e,t))for(let i=e;i<e+t*r.DIMENSION_LENGTH;i+=r.DIMENSION_LENGTH)this.cellTable[i].button.style.backgroundColor=l}}t.PlayerBoard=s},function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=l(0),o=l(1);t.Cell=class{constructor(e){this.state=o.CellState.Empty,this.button=e,this.button.style.backgroundColor=i.colors.empty}}},function(e,t,l){var i=l(11),o=l(12);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},function(e,t,l){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var e={};return function(t){if(void 0===e[t]){var l=document.querySelector(t);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch(e){l=null}e[t]=l}return e[t]}}(),n=[];function r(e){for(var t=-1,l=0;l<n.length;l++)if(n[l].identifier===e){t=l;break}return t}function s(e,t){for(var l={},i=[],o=0;o<e.length;o++){var a=e[o],s=t.base?a[0]+t.base:a[0],c=l[s]||0,u="".concat(s," ").concat(c);l[s]=c+1;var h=r(u),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(n[h].references++,n[h].updater(d)):n.push({identifier:u,updater:y(d,t),references:1}),i.push(u)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=l.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var n=a(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,l,i){var o=l?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var a=document.createTextNode(o),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(a,n[t]):e.appendChild(a)}}function p(e,t,l){var i=l.css,o=l.media,a=l.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,b=0;function y(e,t){var l,i,o;if(t.singleton){var a=b++;l=f||(f=c(t)),i=d.bind(null,l,a,!1),o=d.bind(null,l,a,!0)}else l=c(t),i=p.bind(null,l,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(l)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var l=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<l.length;i++){var o=r(l[i]);n[o].references--}for(var a=s(e,t),c=0;c<l.length;c++){var u=r(l[c]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}l=a}}}},function(e,t,l){"use strict";l.r(t),t.default=l.p+"index.css"}]);