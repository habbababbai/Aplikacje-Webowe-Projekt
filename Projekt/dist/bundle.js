!function(t){var e={};function o(i){if(e[i])return e[i].exports;var l=e[i]={i:i,l:!1,exports:{}};return t[i].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)o.d(i,l,function(e){return t[e]}.bind(null,l));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=4)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Empty=0]="Empty",t[t.Ship=1]="Ship",t[t.Hit=2]="Hit",t[t.Miss=3]="Miss"}(e.CellState||(e.CellState={}))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colors={ship:"Black",empty:"White",hit:"Red",miss:"Pink"}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),l=o(7),n=o(0),a=o(3),r=function(){function t(t){this.cellTable=[];for(var e=0;e<t.length;e++)this.cellTable.push(new l.Cell(t[e]))}return t.prototype.placeHorizontal=function(t,e){for(var o=t;o<t+e;o++)this.cellTable[o].state=n.CellState.Ship},t.prototype.placeVertical=function(t,e){for(var o=t;o<t+7*e;o+=7)this.cellTable[o].state=n.CellState.Ship},t.prototype.canPlaceHorizontal=function(t,e){if(t%7+e>7)return!1;if(t+e>this.cellTable.length)return!1;for(var o=t;o<t+e;o++)if(this.cellTable[o].state!=n.CellState.Empty)return!1;return!0},t.prototype.canPlaceVertical=function(t,e){if(Math.floor(t/7)+e>7)return!1;for(var o=t;o<t+7*e;o+=7)if(this.cellTable[o].state!=n.CellState.Empty)return!1;return!0},t.prototype.setBoardRandomly=function(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2)},t.prototype.placeRandomly=function(t){var e;do{var o=a.getRandomInt(0,this.cellTable.length-1);this.canPlaceHorizontal(o,t)&&(this.placeHorizontal(o,t),e=!0),this.canPlaceVertical(o,t)&&(this.placeVertical(o,t),e=!0)}while(!e)},t.prototype.resetBoard=function(){for(var t=0;t<this.cellTable.length;t++)this.cellTable[t].button.style.backgroundColor=i.colors.empty,this.cellTable[t].state=n.CellState.Empty},t}();e.Board=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(5);window.onload=function(){var t=Array.prototype.slice.call(document.getElementById("playerTable").querySelectorAll("button")),e=Array.prototype.slice.call(document.getElementById("enemyTable").querySelectorAll("button")),o=new i.Game(t,e);document.getElementById("ship5").addEventListener("click",(function(){o.pBoard.chooseShip(5)})),document.getElementById("ship4").addEventListener("click",(function(){o.pBoard.chooseShip(4)})),document.getElementById("ship3").addEventListener("click",(function(){o.pBoard.chooseShip(3)})),document.getElementById("ship2").addEventListener("click",(function(){o.pBoard.chooseShip(2)})),document.getElementById("orientation").addEventListener("click",(function(){o.changePlacingOrientation()})),document.getElementById("reset").addEventListener("click",(function(){o.resetGame()})),document.getElementById("startGame").addEventListener("click",(function(){o.startGame()})),document.getElementById("random").addEventListener("click",(function(){o.pBoard.setBoardRandomly()}))}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),l=o(0),n=o(6),a=o(8),r=o(3),s=o(9),c=function(){function t(t,e){this.pBoard=new n.PlayerBoard(t),this.eBoard=new a.EnemyBoard(e),this.pHitCounter=0,this.eHitCounter=0,this.enemyMode=s.BehaviorMode.huntMode,this.lastEnemyHit=void 0,this.hitDir=void 0}return t.prototype.changePlacingOrientation=function(){this.pBoard.placingHorizontal=!this.pBoard.placingHorizontal},t.prototype.startGame=function(){this.pBoard.areShipsPlaced()&&(this.activateEnemyBoard(),this.enemyMode=s.BehaviorMode.huntMode),console.log("Ships placed: "+this.pBoard.areShipsPlaced())},t.prototype.activateEnemyBoard=function(){var t=this;this.eBoard.setBoardRandomly();for(var e=function(e){o.eBoard.cellTable[e].button.onclick=function(){return t.shootEnemyCell(t.eBoard.cellTable[e])}},o=this,i=0;i<this.eBoard.cellTable.length;i++)e(i)},t.prototype.disableEnemyBoard=function(){for(var t=0;t<this.eBoard.cellTable.length;t++)this.eBoard.cellTable[t].button.onclick=function(){}},t.prototype.shootPlayerCell=function(){switch(this.enemyMode){case s.BehaviorMode.huntMode:this.shootHuntMode();break;case s.BehaviorMode.directionMode:this.shootDirectionMode();break;case s.BehaviorMode.attackMode:this.shootAttackMode();break;case s.BehaviorMode.finishMode:this.shootFinishMode()}console.log(this.enemyMode)},t.prototype.shootHuntMode=function(){var t;do{var e=r.getRandomInt(0,this.pBoard.cellTable.length-1);this.playerCellState(e)==l.CellState.Empty&&(t=!0,this.pBoard.cellTable[e].state=l.CellState.Miss,this.pBoard.cellTable[e].button.style.backgroundColor=i.colors.miss),this.playerCellState(e)==l.CellState.Ship&&(t=!0,this.pBoard.cellTable[e].state=l.CellState.Hit,this.pBoard.cellTable[e].button.style.backgroundColor=i.colors.hit,this.pHitCounter++,this.enemyMode=s.BehaviorMode.directionMode,this.lastEnemyHit=e,this.originalEnemyHit=e)}while(!t)},t.prototype.shootDirectionMode=function(){var t=!1,e=[-7,7,-1,1],o=0;do{var n=r.getRandomInt(0,3),a=this.lastEnemyHit+e[n];a<this.pBoard.cellTable.length&&a>0&&(this.playerCellState(a)==l.CellState.Empty?(t=!0,this.pBoard.cellTable[a].state=l.CellState.Miss,this.pBoard.cellTable[a].button.style.backgroundColor=i.colors.miss):this.playerCellState(a)==l.CellState.Ship?(t=!0,this.pBoard.cellTable[a].state=l.CellState.Hit,this.pBoard.cellTable[a].button.style.backgroundColor=i.colors.hit,this.pHitCounter++,this.enemyMode=s.BehaviorMode.attackMode,this.hitDir=a-this.lastEnemyHit,this.lastEnemyHit=a):4==o?(this.enemyMode=s.BehaviorMode.huntMode,this.shootHuntMode()):o++)}while(!t)},t.prototype.shootAttackMode=function(){var t=this.lastEnemyHit+this.hitDir;t>0&&t<this.pBoard.cellTable.length?(this.playerCellState(t)!=l.CellState.Hit&&this.playerCellState(t)!=l.CellState.Miss||(this.enemyMode=s.BehaviorMode.finishMode,this.lastEnemyHit=this.originalEnemyHit,this.hitDir=-this.hitDir,this.shootFinishMode()),this.playerCellState(t)==l.CellState.Ship&&(this.pBoard.cellTable[t].state=l.CellState.Hit,this.pBoard.cellTable[t].button.style.backgroundColor=i.colors.hit,this.pHitCounter++,this.lastEnemyHit=t),this.playerCellState(t)==l.CellState.Empty&&(this.pBoard.cellTable[t].state=l.CellState.Miss,this.pBoard.cellTable[t].button.style.backgroundColor=i.colors.miss,this.enemyMode=s.BehaviorMode.finishMode,this.lastEnemyHit=this.originalEnemyHit,this.hitDir=-this.hitDir)):(this.enemyMode=s.BehaviorMode.huntMode,this.shootHuntMode())},t.prototype.shootFinishMode=function(){var t=this.lastEnemyHit+this.hitDir;t>0&&t<this.pBoard.cellTable.length?this.playerCellState(t)==l.CellState.Ship?(this.pBoard.cellTable[t].state=l.CellState.Hit,this.pBoard.cellTable[t].button.style.backgroundColor=i.colors.hit,this.lastEnemyHit=t,this.pHitCounter++):this.playerCellState(t)==l.CellState.Empty?(this.pBoard.cellTable[t].state=l.CellState.Miss,this.pBoard.cellTable[t].button.style.backgroundColor=i.colors.miss,this.enemyMode=s.BehaviorMode.huntMode):(this.enemyMode=s.BehaviorMode.huntMode,this.shootHuntMode()):(this.enemyMode=s.BehaviorMode.huntMode,this.shootHuntMode())},t.prototype.shootEnemyCell=function(t){switch(t.state){case l.CellState.Empty:t.state=l.CellState.Miss,t.button.style.backgroundColor=i.colors.miss;break;case l.CellState.Ship:t.state=l.CellState.Hit,t.button.style.backgroundColor=i.colors.hit,this.eHitCounter++}this.shootPlayerCell(),this.checkForWin()},t.prototype.playerCellState=function(t){return this.pBoard.cellTable[t].state},t.prototype.checkForWin=function(){return 14==this.pHitCounter||14==this.eHitCounter?(this.disableEnemyBoard(),14==this.pHitCounter?"Player has won":"Enemy has won"):""},t.prototype.resetGame=function(){this.pBoard.resetBoard(),this.eBoard.resetBoard(),this.disableEnemyBoard(),this.eHitCounter=0,this.pHitCounter=0,this.pBoard.is5Placed=!1,this.pBoard.is4Placed=!1,this.pBoard.is3Placed=!1,this.pBoard.is2Placed=!1,this.enemyMode=s.BehaviorMode.huntMode,this.lastEnemyHit=void 0,this.hitDir=void 0},t}();e.Game=c},function(t,e,o){"use strict";var i,l=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),a=o(2),r=o(0),s=function(t){function e(e){var o=t.call(this,e)||this;return o.placingHorizontal=!0,o.is5Placed=!1,o.is4Placed=!1,o.is3Placed=!1,o.is2Placed=!1,o}return l(e,t),e.prototype.setShip=function(t,e){var o=!1;if(this.placingHorizontal?this.canPlaceHorizontal(t,e)&&(this.placeHorizontal(t,e),o=!0):this.canPlaceVertical(t,e)&&(this.placeVertical(t,e),o=!0),o){switch(e){case 2:this.is2Placed=!0;break;case 3:this.is3Placed=!0;break;case 4:this.is4Placed=!0;break;case 5:this.is5Placed=!0}this.resetButtonEvents()}},e.prototype.setBoardRandomly=function(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2),this.is5Placed=!0,this.is4Placed=!0,this.is3Placed=!0,this.is2Placed=!0},e.prototype.areShipsPlaced=function(){return!!(this.is5Placed&&this.is4Placed&&this.is3Placed&&this.is2Placed)},e.prototype.resetButtonEvents=function(){for(var t=0;t<this.cellTable.length;t++)this.cellTable[t].button.onclick=function(){},this.cellTable[t].button.onmouseover=function(){},this.cellTable[t].button.onmouseout=function(){}},e.prototype.placeHorizontal=function(t,e){for(var o=t;o<t+e;o++)this.cellTable[o].button.style.backgroundColor=n.colors.ship,this.cellTable[o].state=r.CellState.Ship},e.prototype.placeVertical=function(t,e){for(var o=t;o<t+7*e;o+=7)this.cellTable[o].button.style.backgroundColor=n.colors.ship,this.cellTable[o].state=r.CellState.Ship},e.prototype.chooseShip=function(t){for(var e=this,o=function(o){i.cellTable[o].button.onclick=function(){e.setShip(o,t)},i.cellTable[o].button.onmouseover=function(){e.hover(o,t,"Grey")},i.cellTable[o].button.onmouseout=function(){e.hover(o,t,"White")}},i=this,l=0;l<this.cellTable.length;l++)o(l)},e.prototype.hover=function(t,e,o){if(this.placingHorizontal){if(this.canPlaceHorizontal(t,e))for(var i=t;i<t+e;i++)this.cellTable[i].button.style.backgroundColor=o}else if(this.canPlaceVertical(t,e))for(i=t;i<t+7*e;i+=7)this.cellTable[i].button.style.backgroundColor=o},e}(a.Board);e.PlayerBoard=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),l=function(){function t(t){this.state=i.CellState.Empty,this.button=t,this.button.style.backgroundColor="White"}return t.prototype.isFilled=function(){return this.state!=i.CellState.Empty},t}();e.Cell=l},function(t,e,o){"use strict";var i,l=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(o(2).Board);e.EnemyBoard=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.huntMode=0]="huntMode",t[t.directionMode=1]="directionMode",t[t.attackMode=2]="attackMode",t[t.finishMode=3]="finishMode"}(e.BehaviorMode||(e.BehaviorMode={}))}]);