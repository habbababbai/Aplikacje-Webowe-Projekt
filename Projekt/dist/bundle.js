!function(t){var e={};function l(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=e,l.d=function(t,e,o){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(o,i,function(e){return t[e]}.bind(null,i));return o},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l(l.s=4)}([function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colors={ship:"Black",empty:"White",hit:"Red",miss:"Pink"}},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Empty=0]="Empty",t[t.Ship=1]="Ship",t[t.Hit=2]="Hit",t[t.Miss=3]="Miss"}(e.CellState||(e.CellState={}))},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(0),i=l(7),n=l(1),a=l(3),r=function(){function t(t){this.cellTable=[],this.cellTable=[];for(var e=0;e<t.length;e++)this.cellTable.push(new i.Cell(t[e]))}return t.prototype.placeHorizontal=function(t,e){for(var l=t;l<t+e;l++)this.cellTable[l].state=n.CellState.Ship},t.prototype.placeVertical=function(t,e){for(var l=t;l<t+7*e;l+=7)this.cellTable[l].state=n.CellState.Ship},t.prototype.canPlaceHorizontal=function(t,e){if(t%7+e>7)return!1;if(t+e>this.cellTable.length)return!1;for(var l=t;l<t+e;l++)if(this.cellTable[l].state!=n.CellState.Empty)return!1;return!0},t.prototype.canPlaceVertical=function(t,e){if(Math.floor(t/7)+e>7)return!1;for(var l=t;l<t+7*e;l+=7)if(this.cellTable[l].state!=n.CellState.Empty)return!1;return!0},t.prototype.setBoardRandomly=function(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2)},t.prototype.placeRandomly=function(t){var e;do{var l=a.getRandomInt(0,this.cellTable.length-1);this.canPlaceHorizontal(l,t)&&(this.placeHorizontal(l,t),e=!0),this.canPlaceVertical(l,t)&&(this.placeVertical(l,t),e=!0)}while(!e)},t.prototype.resetBoard=function(){for(var t=0;t<this.cellTable.length;t++)this.cellTable[t].button.style.backgroundColor=o.colors.empty,this.cellTable[t].state=n.CellState.Empty,this.cellTable[t].button.onclick=function(){}},t.prototype.disableBoard=function(){for(var t=0;t<this.cellTable.length;t++)this.cellTable[t].button.onclick=function(){}},t.prototype.setCell=function(t,e){switch(this.cellTable[t].state=e,e){case n.CellState.Empty:this.cellTable[t].button.style.backgroundColor=o.colors.empty;break;case n.CellState.Ship:this.cellTable[t].button.style.backgroundColor=o.colors.ship;break;case n.CellState.Miss:this.cellTable[t].button.style.backgroundColor=o.colors.miss;break;case n.CellState.Hit:this.cellTable[t].button.style.backgroundColor=o.colors.hit}},t}();e.Board=r},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(5);window.onload=function(){var t=Array.prototype.slice.call(document.getElementById("playerTable").querySelectorAll("button")),e=Array.prototype.slice.call(document.getElementById("enemyTable").querySelectorAll("button")),l=new o.Game(t,e),i=document.getElementById("ship5"),n=document.getElementById("ship4"),a=document.getElementById("ship3"),r=document.getElementById("ship2"),s=document.getElementById("orientation"),c=document.getElementById("reset"),u=document.getElementById("startGame"),h=document.getElementById("random"),p=[i,n,a,r,s,h,u];function d(t){l.pBoard.chooseShip(t)}function f(t){t.disabled=!0}i.addEventListener("click",(function(){d(5),f(i),f(h)})),n.addEventListener("click",(function(){d(4),f(n),f(h)})),a.addEventListener("click",(function(){d(3),f(a),f(h)})),r.addEventListener("click",(function(){d(2),f(r),f(h)})),s.addEventListener("click",(function(){l.changePlacingOrientation()})),c.addEventListener("click",(function(){l.resetGame();for(var t=0;t<p.length;t++)p[t].disabled=!1})),u.addEventListener("click",(function(){return function(){if(l.startGame(),l.pBoard.areShipsPlaced())for(var t=0;t<p.length;t++)p[t].disabled=!0;else alert("You need to place all ships!")}()})),h.addEventListener("click",(function(){return function(){l.pBoard.setBoardRandomly();for(var t=0;t<4;t++)p[t].disabled=!0}()}))}},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(0),i=l(1),n=l(6),a=l(2),r=l(3),s=function(){function t(t,e){this.pBoard=new n.PlayerBoard(t),this.eBoard=new a.Board(e),this.pHitCounter=0,this.eHitCounter=0}return t.prototype.changePlacingOrientation=function(){this.pBoard.placingHorizontal=!this.pBoard.placingHorizontal},t.prototype.startGame=function(){this.pBoard.areShipsPlaced()&&this.activateEnemyBoard(),console.log("Ships placed: "+this.pBoard.areShipsPlaced())},t.prototype.activateEnemyBoard=function(){var t=this;this.eBoard.setBoardRandomly();for(var e=function(e){l.eBoard.cellTable[e].button.onclick=function(){return t.shootEnemyCell(t.eBoard.cellTable[e])},console.log(l.pBoard.getNeighbours(e))},l=this,o=0;o<this.eBoard.cellTable.length;o++)e(o)},t.prototype.shootPlayerCell=function(){var t=this.pBoard.getHitNeighbours();Array.isArray(t)&&t.length?this.searchingShot():this.randomShot()},t.prototype.randomShot=function(){var t=this.pBoard.getEmptyCells(),e=r.getRandomInt(0,t.length-1);this.playerCellState(t[e])==i.CellState.Empty&&this.pBoard.setCell(t[e],i.CellState.Miss),this.playerCellState(t[e])==i.CellState.Ship&&(this.pBoard.setCell(t[e],i.CellState.Hit),this.pHitCounter++)},t.prototype.searchingShot=function(){var t=this.pBoard.getHitNeighbours(),e=r.getRandomInt(0,t.length-1);this.playerCellState(t[e])==i.CellState.Empty&&this.pBoard.setCell(t[e],i.CellState.Miss),this.playerCellState(t[e])==i.CellState.Ship&&(this.pBoard.setCell(t[e],i.CellState.Hit),this.pHitCounter++)},t.prototype.shootEnemyCell=function(t){switch(t.state){case i.CellState.Empty:t.state=i.CellState.Miss,t.button.style.backgroundColor=o.colors.miss;break;case i.CellState.Ship:t.state=i.CellState.Hit,t.button.style.backgroundColor=o.colors.hit,this.eHitCounter++}this.shootPlayerCell(),this.checkForWin()},t.prototype.playerCellState=function(t){return this.pBoard.cellTable[t].state},t.prototype.checkForWin=function(){return 14==this.pHitCounter?(this.eBoard.disableBoard(),alert("CPU Won!"),!0):14==this.eHitCounter&&(this.eBoard.disableBoard(),alert("Player won!"),!0)},t.prototype.resetGame=function(){this.pBoard.resetBoard(),this.pBoard.disableBoard(),this.eBoard.resetBoard(),this.eBoard.disableBoard(),this.eHitCounter=0,this.pHitCounter=0,this.pBoard.is5Placed=!1,this.pBoard.is4Placed=!1,this.pBoard.is3Placed=!1,this.pBoard.is2Placed=!1},t}();e.Game=s},function(t,e,l){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var l in e)e.hasOwnProperty(l)&&(t[l]=e[l])})(t,e)},function(t,e){function l(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(l.prototype=e.prototype,new l)});Object.defineProperty(e,"__esModule",{value:!0});var n=l(0),a=l(2),r=l(1),s=function(t){function e(e){var l=t.call(this,e)||this;return l.placingHorizontal=!0,l.is5Placed=!1,l.is4Placed=!1,l.is3Placed=!1,l.is2Placed=!1,l.shipsPlaced=[l.is2Placed,l.is3Placed,l.is4Placed,l.is5Placed],l}return i(e,t),e.prototype.getEmptyCells=function(){for(var t=[],e=0;e<this.cellTable.length;e++)e%2==0&&(this.cellTable[e].state!=r.CellState.Empty&&this.cellTable[e].state!=r.CellState.Ship||t.push(e));return t},e.prototype.getHitCells=function(){for(var t=[],e=0;e<this.cellTable.length;e++)this.cellTable[e].state==r.CellState.Hit&&t.push(e);return t},e.prototype.getHitNeighbours=function(){for(var t=this,e=this.getHitCells(),l=[],o=0;o<e.length;o++)l=l.concat(this.getNeighbours(e[o]));return l=l.filter((function(e){return t.cellTable[e].state!=r.CellState.Miss&&t.cellTable[e].state!=r.CellState.Hit}))},e.prototype.getNeighbours=function(t){var e=[];return t>6&&e.push(t-7),t<42&&e.push(t+7),t%7!=0&&e.push(t-1),t%6==0&&0!=t&&42!=t||e.push(t+1),e},e.prototype.setShip=function(t,e){var l=!1;if(this.placingHorizontal?this.canPlaceHorizontal(t,e)&&(this.placeHorizontal(t,e),l=!0):this.canPlaceVertical(t,e)&&(this.placeVertical(t,e),l=!0),l){switch(e){case 2:this.is2Placed=!0;break;case 3:this.is3Placed=!0;break;case 4:this.is4Placed=!0;break;case 5:this.is5Placed=!0}this.resetButtonEvents()}},e.prototype.setBoardRandomly=function(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2),this.is5Placed=!0,this.is4Placed=!0,this.is3Placed=!0,this.is2Placed=!0},e.prototype.areShipsPlaced=function(){return!!(this.is5Placed&&this.is4Placed&&this.is3Placed&&this.is2Placed)},e.prototype.anyShipPlaced=function(){return!!(this.is5Placed||this.is4Placed||this.is3Placed||this.is2Placed)},e.prototype.resetButtonEvents=function(){for(var t=0;t<this.cellTable.length;t++)this.cellTable[t].button.onclick=function(){},this.cellTable[t].button.onmouseover=function(){},this.cellTable[t].button.onmouseout=function(){}},e.prototype.placeHorizontal=function(t,e){for(var l=t;l<t+e;l++)this.cellTable[l].button.style.backgroundColor=n.colors.ship,this.cellTable[l].state=r.CellState.Ship},e.prototype.placeVertical=function(t,e){for(var l=t;l<t+7*e;l+=7)this.cellTable[l].button.style.backgroundColor=n.colors.ship,this.cellTable[l].state=r.CellState.Ship},e.prototype.chooseShip=function(t){var e=this;if(!this.shipsPlaced[t-2])for(var l=function(l){o.cellTable[l].button.onclick=function(){e.setShip(l,t)},o.cellTable[l].button.onmouseover=function(){e.hover(l,t,"Grey")},o.cellTable[l].button.onmouseout=function(){e.hover(l,t,"White")}},o=this,i=0;i<this.cellTable.length;i++)l(i)},e.prototype.hover=function(t,e,l){if(this.placingHorizontal){if(this.canPlaceHorizontal(t,e))for(var o=t;o<t+e;o++)this.cellTable[o].button.style.backgroundColor=l}else if(this.canPlaceVertical(t,e))for(o=t;o<t+7*e;o+=7)this.cellTable[o].button.style.backgroundColor=l},e}(a.Board);e.PlayerBoard=s},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=l(0),i=l(1),n=function(t){this.state=i.CellState.Empty,this.button=t,this.button.style.backgroundColor=o.colors.empty};e.Cell=n}]);