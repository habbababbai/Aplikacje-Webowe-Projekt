!function(t){var e={};function o(l){if(e[l])return e[l].exports;var n=e[l]={i:l,l:!1,exports:{}};return t[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,l){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(l,n,function(e){return t[e]}.bind(null,n));return l},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=4)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Empty=0]="Empty",t[t.Ship=1]="Ship",t[t.Hit=2]="Hit",t[t.Miss=3]="Miss"}(e.CellState||(e.CellState={}))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colors={ship:"Black",empty:"White",hit:"Red",miss:"Pink"}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=o(1),n=o(7),i=o(0),a=o(3),r=function(){function t(t){this.cellTable=[],this.cellTable=[];for(var e=0;e<t.length;e++)this.cellTable.push(new n.Cell(t[e],e))}return t.prototype.placeHorizontal=function(t,e){for(var o=t;o<t+e;o++)this.cellTable[o].state=i.CellState.Ship},t.prototype.placeVertical=function(t,e){for(var o=t;o<t+7*e;o+=7)this.cellTable[o].state=i.CellState.Ship},t.prototype.canPlaceHorizontal=function(t,e){if(t%7+e>7)return!1;if(t+e>this.cellTable.length)return!1;for(var o=t;o<t+e;o++)if(this.cellTable[o].state!=i.CellState.Empty)return!1;return!0},t.prototype.canPlaceVertical=function(t,e){if(Math.floor(t/7)+e>7)return!1;for(var o=t;o<t+7*e;o+=7)if(this.cellTable[o].state!=i.CellState.Empty)return!1;return!0},t.prototype.setBoardRandomly=function(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2)},t.prototype.placeRandomly=function(t){var e;do{var o=a.getRandomInt(0,this.cellTable.length-1);this.canPlaceHorizontal(o,t)&&(this.placeHorizontal(o,t),e=!0),this.canPlaceVertical(o,t)&&(this.placeVertical(o,t),e=!0)}while(!e)},t.prototype.resetBoard=function(){for(var t=0;t<this.cellTable.length;t++)this.cellTable[t].button.style.backgroundColor=l.colors.empty,this.cellTable[t].state=i.CellState.Empty},t.prototype.setCell=function(t,e){switch(this.cellTable[t].state=e,e){case i.CellState.Empty:this.cellTable[t].button.style.backgroundColor=l.colors.empty;break;case i.CellState.Ship:this.cellTable[t].button.style.backgroundColor=l.colors.ship;break;case i.CellState.Miss:this.cellTable[t].button.style.backgroundColor=l.colors.miss;break;case i.CellState.Hit:this.cellTable[t].button.style.backgroundColor=l.colors.hit}},t}();e.Board=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=o(5);window.onload=function(){var t=Array.prototype.slice.call(document.getElementById("playerTable").querySelectorAll("button")),e=Array.prototype.slice.call(document.getElementById("enemyTable").querySelectorAll("button")),o=new l.Game(t,e);console.log(o.pBoard.getEmptyCells()),document.getElementById("ship5").addEventListener("click",(function(){o.pBoard.chooseShip(5)})),document.getElementById("ship4").addEventListener("click",(function(){o.pBoard.chooseShip(4)})),document.getElementById("ship3").addEventListener("click",(function(){o.pBoard.chooseShip(3)})),document.getElementById("ship2").addEventListener("click",(function(){o.pBoard.chooseShip(2)})),document.getElementById("orientation").addEventListener("click",(function(){o.changePlacingOrientation()})),document.getElementById("reset").addEventListener("click",(function(){o.resetGame()})),document.getElementById("startGame").addEventListener("click",(function(){o.startGame()})),document.getElementById("random").addEventListener("click",(function(){o.pBoard.setBoardRandomly()}))}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=o(1),n=o(0),i=o(6),a=o(2),r=o(3),s=function(){function t(t,e){this.pBoard=new i.PlayerBoard(t),this.eBoard=new a.Board(e),this.pHitCounter=0,this.eHitCounter=0}return t.prototype.changePlacingOrientation=function(){this.pBoard.placingHorizontal=!this.pBoard.placingHorizontal},t.prototype.startGame=function(){this.pBoard.areShipsPlaced()&&this.activateEnemyBoard(),console.log("Ships placed: "+this.pBoard.areShipsPlaced())},t.prototype.activateEnemyBoard=function(){var t=this;this.eBoard.setBoardRandomly();for(var e=function(e){o.eBoard.cellTable[e].button.onclick=function(){return t.shootEnemyCell(t.eBoard.cellTable[e])},console.log(o.pBoard.getNeighbours(e))},o=this,l=0;l<this.eBoard.cellTable.length;l++)e(l)},t.prototype.disableEnemyBoard=function(){for(var t=0;t<this.eBoard.cellTable.length;t++)this.eBoard.cellTable[t].button.onclick=function(){}},t.prototype.shootPlayerCell=function(){var t=this.pBoard.getHitNeighbours();Array.isArray(t)&&t.length?this.searchingShot():this.randomShot()},t.prototype.randomShot=function(){var t=this.pBoard.getEmptyCells(),e=r.getRandomInt(0,t.length-1);this.playerCellState(t[e])==n.CellState.Empty&&this.pBoard.setCell(t[e],n.CellState.Miss),this.playerCellState(t[e])==n.CellState.Ship&&this.pBoard.setCell(t[e],n.CellState.Hit)},t.prototype.searchingShot=function(){var t=this.pBoard.getHitNeighbours(),e=r.getRandomInt(0,t.length-1);this.playerCellState(t[e])==n.CellState.Empty&&this.pBoard.setCell(t[e],n.CellState.Miss),this.playerCellState(t[e])==n.CellState.Ship&&this.pBoard.setCell(t[e],n.CellState.Hit)},t.prototype.rndShot=function(){var t=!1;do{var e=r.getRandomInt(0,this.pBoard.cellTable.length-1);this.playerCellState(e)==n.CellState.Empty&&(this.pBoard.setCell(e,n.CellState.Miss),t=!0),this.playerCellState(e)==n.CellState.Ship&&(this.pBoard.setCell(e,n.CellState.Hit),t=!0)}while(!t)},t.prototype.shootEnemyCell=function(t){switch(t.state){case n.CellState.Empty:t.state=n.CellState.Miss,t.button.style.backgroundColor=l.colors.miss;break;case n.CellState.Ship:t.state=n.CellState.Hit,t.button.style.backgroundColor=l.colors.hit,this.eHitCounter++}this.shootPlayerCell(),this.checkForWin()},t.prototype.playerCellState=function(t){return this.pBoard.cellTable[t].state},t.prototype.checkForWin=function(){return 14==this.pHitCounter||14==this.eHitCounter?(this.disableEnemyBoard(),14==this.pHitCounter?"Player has won":"Enemy has won"):""},t.prototype.resetGame=function(){this.pBoard.resetBoard(),this.eBoard.resetBoard(),this.disableEnemyBoard(),this.eHitCounter=0,this.pHitCounter=0,this.pBoard.is5Placed=!1,this.pBoard.is4Placed=!1,this.pBoard.is3Placed=!1,this.pBoard.is2Placed=!1},t}();e.Game=s},function(t,e,o){"use strict";var l,n=this&&this.__extends||(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),a=o(2),r=o(0),s=function(t){function e(e){var o=t.call(this,e)||this;return o.placingHorizontal=!0,o.is5Placed=!1,o.is4Placed=!1,o.is3Placed=!1,o.is2Placed=!1,o}return n(e,t),e.prototype.getEmptyCells=function(){for(var t=[],e=0;e<this.cellTable.length;e++)e%2==0&&(this.cellTable[e].state!=r.CellState.Empty&&this.cellTable[e].state!=r.CellState.Ship||t.push(e));return t},e.prototype.getHitCells=function(){for(var t=[],e=0;e<this.cellTable.length;e++)this.cellTable[e].state==r.CellState.Hit&&t.push(e);return t},e.prototype.getHitNeighbours=function(){for(var t=this,e=this.getHitCells(),o=[],l=0;l<e.length;l++)o=o.concat(this.getNeighbours(e[l]));return o=o.filter((function(e){return t.cellTable[e].state!=r.CellState.Miss&&t.cellTable[e].state!=r.CellState.Hit}))},e.prototype.getNeighbours=function(t){var e=[];return t>6&&e.push(t-7),t<42&&e.push(t+7),t%7!=0&&e.push(t-1),t%6==0&&0!=t&&42!=t||e.push(t+1),e},e.prototype.setShip=function(t,e){var o=!1;if(this.placingHorizontal?this.canPlaceHorizontal(t,e)&&(this.placeHorizontal(t,e),o=!0):this.canPlaceVertical(t,e)&&(this.placeVertical(t,e),o=!0),o){switch(e){case 2:this.is2Placed=!0;break;case 3:this.is3Placed=!0;break;case 4:this.is4Placed=!0;break;case 5:this.is5Placed=!0}this.resetButtonEvents()}},e.prototype.setBoardRandomly=function(){this.placeRandomly(5),this.placeRandomly(4),this.placeRandomly(3),this.placeRandomly(2),this.is5Placed=!0,this.is4Placed=!0,this.is3Placed=!0,this.is2Placed=!0},e.prototype.areShipsPlaced=function(){return!!(this.is5Placed&&this.is4Placed&&this.is3Placed&&this.is2Placed)},e.prototype.resetButtonEvents=function(){for(var t=0;t<this.cellTable.length;t++)this.cellTable[t].button.onclick=function(){},this.cellTable[t].button.onmouseover=function(){},this.cellTable[t].button.onmouseout=function(){}},e.prototype.placeHorizontal=function(t,e){for(var o=t;o<t+e;o++)this.cellTable[o].button.style.backgroundColor=i.colors.ship,this.cellTable[o].state=r.CellState.Ship},e.prototype.placeVertical=function(t,e){for(var o=t;o<t+7*e;o+=7)this.cellTable[o].button.style.backgroundColor=i.colors.ship,this.cellTable[o].state=r.CellState.Ship},e.prototype.chooseShip=function(t){for(var e=this,o=function(o){l.cellTable[o].button.onclick=function(){e.setShip(o,t)},l.cellTable[o].button.onmouseover=function(){e.hover(o,t,"Grey")},l.cellTable[o].button.onmouseout=function(){e.hover(o,t,"White")}},l=this,n=0;n<this.cellTable.length;n++)o(n)},e.prototype.hover=function(t,e,o){if(this.placingHorizontal){if(this.canPlaceHorizontal(t,e))for(var l=t;l<t+e;l++)this.cellTable[l].button.style.backgroundColor=o}else if(this.canPlaceVertical(t,e))for(l=t;l<t+7*e;l+=7)this.cellTable[l].button.style.backgroundColor=o},e}(a.Board);e.PlayerBoard=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=o(1),n=o(0),i=function(t,e){this.state=n.CellState.Empty,this.button=t,this.index=e,this.button.style.backgroundColor=l.colors.empty};e.Cell=i}]);